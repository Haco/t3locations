(function(t){t("#t3locations-select-territory").on("change",function(){t("#t3locations-select-country").attr("disabled","disabled");t("#t3locations-select-country").find("option:not(:eq(0))").remove();if(this.value!=0){ajaxRequest("getData",{territory:this.value},function(e){if(e.length){var a=t("#t3locations-select-country");a.removeAttr("disabled");for(var i in e){a.append('<option value="'+e[i].uid+'">'+e[i].title+"</option>")}}else{t("#t3locations-select-country").attr("disabled","disabled")}})}});t("#t3locations-select-country").on("change",function(){if(this.value!=0){ajaxRequest("getData",{region:this.value},function(e){var a=e["mapData"];t("#t3locations-ajax").html(e["html"]);t(".t3locations-vcard").each(function(){var e=t(this).parent().height(),a=t(this).children("address").first().css("margin-top"),i=t(this).children("address").first().css("margin-bottom"),n=e-parseInt(a)-parseInt(i);t(this).height(e);t(this).children("address").first().css({height:n+"px"})});if(e["addMapCanvas"]){initializeMap(a)}})}});t("#t3locations-select-territory").val("");t("#t3locations-select-country").attr("disabled","disabled")})(jQuery);function ajaxRequest(t,e,a){$("#t3locations-ajax-indicator").css("display","inline-block");$.ajax({async:"true",url:"index.php",type:"POST",dataType:"json",data:{eID:"t3locations",id:parseInt(pid),L:parseInt(langUid),type:1427289984,request:{controllerName:"JsonRequest",actionName:t,arguments:e}},success:a,complete:function(){$("#t3locations-ajax-indicator").hide()},error:function(t,e,a){console.log("Request failed with "+e+": "+a+"!")}})}